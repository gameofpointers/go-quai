<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quai Mining Pool</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <script src="https://unpkg.com/globe.gl@2.27.0/dist/globe.gl.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="app">
        <!-- Top Navigation -->
        <nav class="top-nav">
            <div class="nav-container">
                <div class="nav-left">
                    <div class="logo">
                        <span class="logo-icon">‚óà</span>
                        <span class="logo-text">QUAI POOL</span>
                    </div>
                    <div class="nav-tabs">
                        <button class="nav-tab active" data-tab="pool">
                            <span class="tab-icon">‚õè</span>
                            <span>Pool</span>
                        </button>
                        <button class="nav-tab" data-tab="node">
                            <span class="tab-icon">‚óâ</span>
                            <span>Node</span>
                        </button>
                        <button class="nav-tab" data-tab="guide">
                            <span class="tab-icon">üìñ</span>
                            <span>Mining Guide</span>
                        </button>
                    </div>
                </div>
                <div class="nav-right">
                    <div class="network-status">
                        <span class="status-dot synced" id="nav-status-dot"></span>
                        <span id="nav-sync-text">SYNCED</span>
                    </div>
                    <button class="nav-tab profile-tab" data-tab="profile">
                        <span class="tab-icon">üë§</span>
                        <span>Profile</span>
                    </button>
                </div>
            </div>
        </nav>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Pool Tab -->
            <div class="tab-content active" id="pool-tab">
                <!-- Pool Stats Header -->
                <div class="pool-header">
                    <div class="pool-stat-card primary">
                        <div class="stat-label">Pool Hashrate</div>
                        <div class="stat-value" id="pool-hashrate">0 H/s</div>
                    </div>
                    <div class="pool-stat-card">
                        <div class="stat-label">Workers Online</div>
                        <div class="stat-value" id="pool-workers">0</div>
                    </div>
                    <div class="pool-stat-card">
                        <div class="stat-label">Blocks Found</div>
                        <div class="stat-value" id="pool-blocks">0</div>
                    </div>
                    <div class="pool-stat-card">
                        <div class="stat-label">Efficiency</div>
                        <div class="stat-value" id="pool-efficiency">100%</div>
                    </div>
                </div>

                <!-- Connection URLs -->
                <div class="section">
                    <h2 class="section-title">Connection Details</h2>
                    <div class="connection-grid">
                        <div class="connection-card" id="stratum-sha-card">
                            <div class="connection-header">
                                <span class="connection-icon">‚õè</span>
                                <span class="connection-label">Stratum (SHA256)</span>
                            </div>
                            <div class="connection-value" id="stratum-sha-url" onclick="copyUrl('stratum-sha-url')">
                                <code>stratum+tcp://localhost:3334</code>
                                <span class="copy-btn">Copy</span>
                            </div>
                        </div>
                        <div class="connection-card" id="stratum-scrypt-card">
                            <div class="connection-header">
                                <span class="connection-icon">‚õè</span>
                                <span class="connection-label">Stratum (Scrypt)</span>
                            </div>
                            <div class="connection-value" id="stratum-scrypt-url" onclick="copyUrl('stratum-scrypt-url')">
                                <code>stratum+tcp://localhost:3335</code>
                                <span class="copy-btn">Copy</span>
                            </div>
                        </div>
                        <div class="connection-card" id="stratum-kawpow-card">
                            <div class="connection-header">
                                <span class="connection-icon">‚õè</span>
                                <span class="connection-label">Stratum (Kawpow)</span>
                            </div>
                            <div class="connection-value" id="stratum-kawpow-url" onclick="copyUrl('stratum-kawpow-url')">
                                <code>stratum+tcp://localhost:3333</code>
                                <span class="copy-btn">Copy</span>
                            </div>
                        </div>
                        <div class="connection-card">
                            <div class="connection-header">
                                <span class="connection-icon">üåê</span>
                                <span class="connection-label">RPC Endpoint</span>
                            </div>
                            <div class="connection-value" id="rpc-url" onclick="copyUrl('rpc-url')">
                                <code>http://localhost:8546</code>
                                <span class="copy-btn">Copy</span>
                            </div>
                        </div>
                        <div class="connection-card">
                            <div class="connection-header">
                                <span class="connection-icon">üì°</span>
                                <span class="connection-label">WebSocket</span>
                            </div>
                            <div class="connection-value" id="ws-url" onclick="copyUrl('ws-url')">
                                <code>ws://localhost:8546</code>
                                <span class="copy-btn">Copy</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Charts Row -->
                <div class="section">
                    <div class="charts-grid">
                        <div class="card">
                            <h3 class="card-title">Hashrate History (24h)</h3>
                            <div class="chart-container">
                                <canvas id="hashrate-chart"></canvas>
                            </div>
                        </div>
                        <div class="card">
                            <h3 class="card-title">Network Peers</h3>
                            <div id="globe-container"></div>
                            <div class="globe-stats">
                                <span id="globe-peer-count">0</span> connected peers worldwide
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Workers Table -->
                <div class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Active Workers</h3>
                            <button class="btn-secondary" onclick="refreshWorkers()">
                                <span>‚Üª</span> Refresh
                            </button>
                        </div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Address</th>
                                        <th>Worker</th>
                                        <th>Algorithm</th>
                                        <th>Hashrate</th>
                                        <th>Valid Shares</th>
                                        <th>Invalid</th>
                                        <th>Last Share</th>
                                    </tr>
                                </thead>
                                <tbody id="workers-tbody">
                                    <tr class="empty-row">
                                        <td colspan="7">No workers connected</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- Recent Blocks -->
                <div class="section">
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Recent Blocks</h3>
                        </div>
                        <div class="table-container">
                            <table class="data-table">
                                <thead>
                                    <tr>
                                        <th>Height</th>
                                        <th>Hash</th>
                                        <th>Miner</th>
                                        <th>Transactions</th>
                                        <th>Time</th>
                                    </tr>
                                </thead>
                                <tbody id="blocks-tbody">
                                    <tr class="empty-row">
                                        <td colspan="5">No blocks found yet</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Node Tab -->
            <div class="tab-content" id="node-tab">
                <div class="section">
                    <h2 class="section-title">Node Information</h2>
                    <div class="node-info-grid">
                        <div class="info-card">
                            <div class="info-icon">üì¶</div>
                            <div class="info-content">
                                <div class="info-label">Version</div>
                                <div class="info-value" id="node-version">-</div>
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">üåê</div>
                            <div class="info-content">
                                <div class="info-label">Network</div>
                                <div class="info-value" id="node-network">-</div>
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">üìç</div>
                            <div class="info-content">
                                <div class="info-label">Location</div>
                                <div class="info-value" id="node-location">-</div>
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">üî¢</div>
                            <div class="info-content">
                                <div class="info-label">Block Height</div>
                                <div class="info-value" id="block-height">-</div>
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">üîó</div>
                            <div class="info-content">
                                <div class="info-label">Chain ID</div>
                                <div class="info-value" id="chain-id">-</div>
                            </div>
                        </div>
                        <div class="info-card">
                            <div class="info-icon">‚è±</div>
                            <div class="info-content">
                                <div class="info-label">Uptime</div>
                                <div class="info-value" id="node-uptime">-</div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2 class="section-title">Sync Status</h2>
                    <div class="sync-card">
                        <div class="sync-status-display">
                            <div class="sync-icon" id="sync-icon">‚úì</div>
                            <div class="sync-info">
                                <div class="sync-title" id="sync-title">Fully Synced</div>
                                <div class="sync-subtitle" id="sync-subtitle">Node is up to date with the network</div>
                            </div>
                        </div>
                        <div class="sync-progress-container" id="sync-progress-container" style="display: none;">
                            <div class="sync-progress-bar">
                                <div class="sync-progress-fill" id="sync-progress-fill"></div>
                            </div>
                            <div class="sync-progress-text" id="sync-progress-text">0%</div>
                        </div>
                    </div>
                </div>

                <div class="section">
                    <h2 class="section-title">Peer Connections</h2>
                    <div class="card">
                        <div class="peer-stats">
                            <div class="peer-stat">
                                <div class="peer-stat-value" id="peer-count">0</div>
                                <div class="peer-stat-label">Total Peers</div>
                            </div>
                            <div class="peer-stat">
                                <div class="peer-stat-value" id="inbound-peers">0</div>
                                <div class="peer-stat-label">Inbound</div>
                            </div>
                            <div class="peer-stat">
                                <div class="peer-stat-value" id="outbound-peers">0</div>
                                <div class="peer-stat-label">Outbound</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Mining Guide Tab -->
            <div class="tab-content" id="guide-tab">
                <div class="section">
                    <h2 class="section-title">Getting Started with Quai Mining</h2>

                    <div class="guide-card">
                        <h3 class="guide-step-title">
                            <span class="step-number">1</span>
                            Choose Your Mining Algorithm
                        </h3>
                        <div class="guide-content">
                            <p>Quai Network supports multiple mining algorithms. Each algorithm has its own dedicated stratum port:</p>
                            <div class="algo-grid">
                                <div class="algo-card">
                                    <div class="algo-name">Kawpow</div>
                                    <div class="algo-desc">GPU-optimized ProgPoW variant</div>
                                    <div class="algo-software">Port: <span id="guide-kawpow-port">3333</span></div>
                                </div>
                                <div class="algo-card">
                                    <div class="algo-name">SHA256</div>
                                    <div class="algo-desc">ASIC and high-end GPU mining</div>
                                    <div class="algo-software">Port: <span id="guide-sha-port">3334</span></div>
                                </div>
                                <div class="algo-card">
                                    <div class="algo-name">Scrypt</div>
                                    <div class="algo-desc">Memory-hard algorithm for GPUs</div>
                                    <div class="algo-software">Port: <span id="guide-scrypt-port">3335</span></div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="guide-card">
                        <h3 class="guide-step-title">
                            <span class="step-number">2</span>
                            Configure Your Miner
                        </h3>
                        <div class="guide-content">
                            <p>Connect to the appropriate port for your mining algorithm:</p>
                            <div class="code-block">
                                <div class="code-header">
                                    <span>Kawpow (GPU)</span>
                                    <button class="copy-code-btn" onclick="copyCode('kawpow-config')">Copy</button>
                                </div>
                                <pre id="kawpow-config">-o stratum+tcp://<span id="guide-stratum-host">localhost:3333</span>
-u YOUR_QUAI_ADDRESS.worker_name
-p x
-a kawpow</pre>
                            </div>
                            <div class="code-block">
                                <div class="code-header">
                                    <span>SHA256</span>
                                    <button class="copy-code-btn" onclick="copyCode('sha-config')">Copy</button>
                                </div>
                                <pre id="sha-config">-o stratum+tcp://<span id="guide-sha-host">localhost:3334</span>
-u YOUR_QUAI_ADDRESS.worker_name
-p x
-a sha256</pre>
                            </div>
                            <div class="code-block">
                                <div class="code-header">
                                    <span>Scrypt</span>
                                    <button class="copy-code-btn" onclick="copyCode('scrypt-config')">Copy</button>
                                </div>
                                <pre id="scrypt-config">-o stratum+tcp://<span id="guide-scrypt-host">localhost:3335</span>
-u YOUR_QUAI_ADDRESS.worker_name
-p x
-a scrypt</pre>
                            </div>
                        </div>
                    </div>

                    <div class="guide-card">
                        <h3 class="guide-step-title">
                            <span class="step-number">3</span>
                            Start Mining
                        </h3>
                        <div class="guide-content">
                            <p>Launch your miner and verify the connection:</p>
                            <ul class="guide-list">
                                <li>Check that your worker appears in the <strong>Pool</strong> tab</li>
                                <li>Monitor your hashrate and shares</li>
                                <li>Add your address to the <strong>Profile</strong> tab to track earnings</li>
                            </ul>
                        </div>
                    </div>

                    <div class="guide-card">
                        <h3 class="guide-step-title">
                            <span class="step-number">4</span>
                            Supported Commands
                        </h3>
                        <div class="guide-content">
                            <p>Stratum protocol commands supported by this pool:</p>
                            <div class="command-list">
                                <div class="command-item">
                                    <code>mining.subscribe</code>
                                    <span>Initialize connection and get job</span>
                                </div>
                                <div class="command-item">
                                    <code>mining.authorize</code>
                                    <span>Authenticate with address.worker</span>
                                </div>
                                <div class="command-item">
                                    <code>mining.submit</code>
                                    <span>Submit proof of work</span>
                                </div>
                                <div class="command-item">
                                    <code>mining.set_difficulty</code>
                                    <span>Server sets worker difficulty</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Profile Tab -->
            <div class="tab-content" id="profile-tab">
                <div class="section">
                    <h2 class="section-title">Track Your Mining</h2>

                    <!-- Address Input -->
                    <div class="card">
                        <div class="card-header">
                            <h3 class="card-title">Add Address to Track</h3>
                        </div>
                        <div class="address-input-container">
                            <input type="text"
                                   id="address-input"
                                   class="address-input"
                                   placeholder="Enter your Quai address (0x...)"
                                   spellcheck="false">
                            <button class="btn-primary" onclick="addTrackedAddress()">
                                <span>+</span> Add Address
                            </button>
                        </div>
                    </div>

                    <!-- Tracked Addresses -->
                    <div id="tracked-addresses-container">
                        <div class="empty-state" id="no-addresses-msg">
                            <div class="empty-icon">üë§</div>
                            <div class="empty-title">No addresses tracked</div>
                            <div class="empty-subtitle">Add your mining address above to track your workers and earnings</div>
                        </div>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-content">
                <span>Quai Network Mining Pool</span>
                <span class="footer-divider">‚Ä¢</span>
                <span id="footer-version">-</span>
            </div>
        </footer>
    </div>

    <script src="js/app.js"></script>
</body>
</html>
